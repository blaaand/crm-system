# ๐ ุงูุชุดุฎูุต ุงููุงูู ูุงูุฎูุงุตุฉ

## ๐ **ุงูุชุงุฑูุฎ:** 2025-02-11

---

## โ **ุงูููุฏ ุตุญูุญ 100%**

ุฌููุน ุงูููุฏ ุงูููุฌูุฏ ุตุญูุญ:

- โ `backend/src/main.ts` ูุณุชุฎุฏู `process.env.PORT || 3000`
- โ `frontend/src/services/api.ts` ูุณุชุฎุฏู `import.meta.env.VITE_API_URL || '/api'`
- โ `backend/railway.json` ูุญุชูู ุนูู Start Command
- โ `backend/Procfile` ุตุญูุญ

---

## ๐ฏ **ุงููุดููุฉ ุงูุญููููุฉ:**

**ูู ูุชุญูู ูู Railway Logs ุจุนุฏ!**

ูุญุชุงุฌ ูุฑุคูุฉ Logs ููุนุฑู **ูุง ุงูุฐู ูุญุฏุซ ุจุงูุถุจุท** ุนูุฏ Deploy

---

## ๐ **ุงูุฎุทูุงุช ุงูุตุญูุญุฉ ููุชุดุฎูุต:**

### **1๏ธโฃ ุชุญูู ูู Railway Backend Logs**

ุงุฐูุจ ุฅูู: https://railway.app

1. ุงูุชุญ **Backend Service**
2. ุงูุชูู ุฅูู **Deployments**
3. ุงุถุบุท ุนูู **Latest Deployment**
4. ุงูุณุฎ **ูู Logs** (ุขุฎุฑ 100 ุณุทุฑ ุนูู ุงูุฃูู)

---

### **2๏ธโฃ ุงุฎุชุจุฑ Health Check**

ุงูุชุญ ูู ุงููุชุตูุญ:
```
https://web-production-e0446.up.railway.app/api/health
```

**ุงููุชุงุฆุฌ:**

#### โ **ุฅุฐุง ุธูุฑ:**
```json
{
  "status": "OK",
  "message": "Server is running"
}
```
**ูุฐุง ูุนูู:** Backend ูุนูู โ

#### โ **ุฅุฐุง ุธูุฑ 502/503:**
```
502 Bad Gateway
503 Service Unavailable
```
**ูุฐุง ูุนูู:** Backend ูุง ูุนูู โ

---

### **3๏ธโฃ ุงุฎุชุจุงุฑ Login Endpoint**

ุงูุชุญ Postman ุฃู Terminal:

```bash
curl -X POST https://web-production-e0446.up.railway.app/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"test123"}'
```

**ุงููุชุงุฆุฌ:**

#### โ **ุฅุฐุง ุธูุฑ 200 OK ูุน Token:**
**ูุฐุง ูุนูู:** Backend ูุนูู โ

#### โ **ุฅุฐุง ุธูุฑ 502/503:**
**ูุฐุง ูุนูู:** Backend ูุง ูุนูู โ

---

### **4๏ธโฃ ุงูุชุญูู ูู Frontend**

ุงูุชุญ ูููุนู ูู ุงููุชุตูุญ:
```
https://crm-system-virid.vercel.app/login
```

1. ุงุถุบุท **F12**
2. ุงูุชูู ุฅูู **Console**
3. ุงูุชุจ:
```javascript
console.log(import.meta.env.VITE_API_URL)
```

**ุงููุชุงุฆุฌ:**

#### โ **ุฅุฐุง ุธูุฑ:**
```
https://web-production-e0446.up.railway.app/api
```
**ูุฐุง ูุนูู:** Frontend config ุตุญูุญ โ

#### โ **ุฅุฐุง ุธูุฑ `undefined` ุฃู `/api`:**
**ูุฐุง ูุนูู:** Frontend ูู ูุชู Build ูุน ุงููุชุบูุฑ โ

**ุงูุญู:** ุฃุนุฏ Build ูู Vercel

---

## ๐ **ุฌุฏูู ุงูุชุญููู:**

| ุงูุนูุตุฑ | ุงููุชููุน | ุงูุชุญูู |
|---------|---------|---------|
| Backend Code | โ ุตุญูุญ | ูุญุชุงุฌ Logs |
| Frontend Code | โ ุตุญูุญ | ูุญุชุงุฌ Console check |
| Railway Config | โ ูุญุฏุซ | ูุญุชุงุฌ Redeploy |
| Vercel Config | โ ููุฌูุฏ | ูุญุชุงุฌ Redeploy |

---

## ๐ง **ุงูุญููู ุงููุญุชููุฉ:**

### **ุงูุญู 1: Railway Backend ูุง ูุนูู**

**ุงูุฃุนุฑุงุถ:**
- Health Check ูุนุทู 502/503
- Login ูุนุทู 502/503
- Logs ุชุธูุฑ ุฃุฎุทุงุก

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**

#### **ุฃ) DATABASE_URL ุฎุงุทุฆ**
```bash
Error: Can't reach database server
```

**ุงูุญู:**
1. ุงุฐูุจ ุฅูู Supabase โ Settings โ Database
2. ุงูุณุฎ **Connection Pooler URL**
3. ุชุฃูุฏ ุฃูู ูุญุชูู `pgbouncer=true`
4. ุญุฏูุซ `DATABASE_URL` ูู Railway
5. ุฃุนุฏ Deploy

---

#### **ุจ) Prisma Migration ูุดู**
```bash
Error: Migration failed
```

**ุงูุญู:**
1. ุงูุญุต Prisma schema
2. ุชุฃูุฏ ูู Migration files ููุฌูุฏุฉ
3. ุฌุฑูุจ Migration ูุญููุงู:
```bash
cd backend
npx prisma migrate deploy
```

---

#### **ุฌ) Build Failed**
```bash
Error: Build failed
```

**ุงูุญู:**
1. ุงูุญุต Logs ููุฎุทุฃ ุงููุญุฏุฏ
2. ุฌุฑูุจ Build ูุญููุงู:
```bash
cd backend
npm install
npm run build
```
3. ุฅุฐุง ูุฌุญุ Push changes
4. ุฅุฐุง ูุดูุ ุฃุฑุณู ูู ุงูุฎุทุฃ

---

### **ุงูุญู 2: Backend ูุนูู ููู Frontend ูุง ูุตู**

**ุงูุฃุนุฑุงุถ:**
- Health Check ูุนูู โ
- Login ูู Postman ูุนูู โ
- Login ูู ุงููููุน ููุดู โ

**ุงูุณุจุจ: CORS**

**ุงูุญู:**

1. ุชุฃูุฏ ูู `CORS_ORIGIN` ูู Railway:
```env
CORS_ORIGIN=https://crm-system-virid.vercel.app
```

2. ุชุฃูุฏ ุฃูู **ูุง ูุญุชูู ูุณุงูุงุช** ูู ุงูุจุฏุงูุฉ/ุงูููุงูุฉ

3. ุฅุฐุง ูุงู ูุฏูู ุนุฏุฉ domainsุ ุงูุตููู ุจู comma:
```env
CORS_ORIGIN=https://domain1.vercel.app,https://domain2.vercel.app
```

---

### **ุงูุญู 3: Frontend ูุดูุฑ ูู Backend ุฎุงุทุฆ**

**ุงูุฃุนุฑุงุถ:**
- Health Check ููุดู
- Console ูู Frontend ูุธูุฑ `/api` ุจุฏูุงู ูู URL ูุงูู

**ุงูุณุจุจ:** `VITE_API_URL` ุบูุฑ ูุนุฑู ุฃู Build ูุฏูู

**ุงูุญู:**

1. ูู Vercel:
   - Settings โ Environment Variables
   - ุชุฃูุฏ ูู `VITE_API_URL` ููุฌูุฏ
   - ุงููููุฉ: `https://web-production-e0446.up.railway.app/api`
   
2. **ุฃุนุฏ Deploy:**
   - Deployments โ โฎ โ Redeploy

3. ุงุฎุชุจุงุฑ:
   - ุงูุชุญ ูููุน
   - F12 โ Console
   - `console.log(import.meta.env.VITE_API_URL)`
   - ูุฌุจ ุฃู ูุธูุฑ URL ูุงูู

---

## ๐ **Checklist ุดุงูู:**

### **Backend (Railway):**
- [ ] Logs ุชุธูุฑ "Application is running"
- [ ] Health Check ูุนูู: `/api/health`
- [ ] Login Endpoint ูุนูู: `/api/auth/login`
- [ ] DATABASE_URL ุตุญูุญ (Pooler)
- [ ] JWT_SECRET ููุฌูุฏ
- [ ] CORS_ORIGIN ูุญุชูู Frontend URL
- [ ] Root Directory = `backend`
- [ ] Start Command ููุฌูุฏ ูู railway.json

---

### **Frontend (Vercel):**
- [ ] VITE_API_URL ูุนุฑู: `https://web-production-e0446.up.railway.app/api`
- [ ] Build ูุฌุญ
- [ ] Console ูุธูุฑ URL ูุงูู (ููุณ `/api`)
- [ ] Root Directory = `frontend`

---

## ๐ **ุฃุฑุณู ูู ุงูุชุงูู:**

### **1. Railway Backend Logs**
```
ุงุฐูุจ ุฅูู: Railway โ Backend โ Deployments โ Latest โ Logs
ุงูุณุฎ ุขุฎุฑ 100 ุณุทุฑ
```

### **2. Health Check Response**
```
ุงูุชุญ: https://web-production-e0446.up.railway.app/api/health
ุงูุณุฎ ุงูู Response
```

### **3. Login Test Response**
```
ุงูุชุญ Postman: POST /api/auth/login
ุงูุณุฎ ุงูู Response
```

### **4. Frontend Console Output**
```
ุงูุชุญ ุงููููุน โ F12 โ Console
console.log(import.meta.env.VITE_API_URL)
ุงูุณุฎ ุงููุชูุฌุฉ
```

---

## โณ **ุงูุขู:**

**ุฃุฑุณู ูู ูุฐู ุงููุนูููุงุช ูุณุฃุฎุจุฑู ุจุงูุถุจุท ูุง ุงููุดููุฉ!**

---

## ๐ **ููุงุญุธุงุช ูููุฉ:**

### **Railway PORT:**
- Railway **ูุญุฏุฏ PORT ุชููุงุฆูุงู** ูู `process.env.PORT`
- ูู ุงูููุฏ: `const port = process.env.PORT || 3000;` โ
- ูุง ุชุญุชุงุฌ ุชุนููู PORT ูุฏููุงู ูู Railway Settings
- Target Port ูู Railway Settings ูู **ููุฏููู ููุท**

### **Health Check:**
- Health Check ููุฌูุฏ ูู: `/api/health`
- ูุนุทู: `{"status":"OK","message":"Server is running"}`
- ุงุณุชุฎุฏูู ููุชุฃูุฏ ุฃู Backend ูุนูู

### **CORS:**
- CORS ูุถุจูุท ูู Backend: `app.enableCors()`
- ูุฃุฎุฐ Origins ูู `CORS_ORIGIN` environment variable
- ุชุฃูุฏ Frontend URL **ุตุญูุญ ุชูุงูุงู** (ุจุฏูู `/` ูู ุงูููุงูุฉ)

---

## โ **ููุฎุต:**

ุงูููุฏ ุตุญูุญ 100%ุ ููู ูุญุชุงุฌ Logs ูุชุญุฏูุฏ ุงููุดููุฉ ุงูุฏูููุฉ.

**ุฃุฑุณู ูู:**
1. โ Railway Logs
2. โ Health Check response
3. โ Console output ูู Frontend

---

**โณ ุจุงูุชุธุงุฑ ุงููุนูููุงุช ููู!**

