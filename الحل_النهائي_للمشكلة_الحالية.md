# ðŸ” Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø´Ø§Ù…Ù„ Ù„Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©

## ðŸ“… **Ø§Ù„ØªØ§Ø±ÙŠØ®:** 2025-02-11

---

## ðŸŽ¯ **Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:**

Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù„Ø§ ÙŠØµÙ„ Ù„Ù„Ù€ Backend Ø¹Ù†Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„

---

## âœ… **Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ©:**

### **1ï¸âƒ£ Railway Backend:**

**URL:** `https://web-production-e0446.up.railway.app`

**Root Directory:** `/backend` âœ…

**Port:** `8080` âŒ **Ù‡Ø°Ø§ Ø®Ø·Ø£!**

---

## âŒ **Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© #1: Railway Port Settings**

### **Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:**

ÙÙŠ Railway SettingsØŒ Ø§Ù„Ù…Ù†ÙØ° Ù…Ø¶Ø¨ÙˆØ· Ø¹Ù„Ù‰ `8080`

Ù„ÙƒÙ† **Backend ÙŠØ´ØºÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ÙØ° `3000`**

### **Ø§Ù„Ø¥Ø«Ø¨Ø§Øª:**

ÙÙŠ `backend/src/main.ts` Ø§Ù„Ø³Ø·Ø± 57:
```typescript
const port = process.env.PORT || 3000;
```

**Backend ÙŠØ´ØºÙ„ Ø¹Ù„Ù‰:** `3000` âœ…  
**Railway Ù…Ø¶Ø¨ÙˆØ· Ø¹Ù„Ù‰:** `8080` âŒ

### **Ø§Ù„Ø­Ù„:**

ÙÙŠ Railway Backend Settings:

1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ **Networking** â†’ **Target port**
2. ØºÙŠÙ‘Ø± Ø§Ù„Ù‚ÙŠÙ…Ø© Ù…Ù† `8080` Ø¥Ù„Ù‰ `3000`
3. Ø§Ø¶ØºØ· **Update**
4. Ø§Ù†ØªØ¸Ø± Redeploy ØªÙ„Ù‚Ø§Ø¦ÙŠ

---

## âœ… **Ø§Ù„Ø­Ù„ Ø§Ù„Ù…Ø¶Ù…Ù†:**

**Ù…Ù„Ù `backend/railway.json` ØªÙ… ØªØ­Ø¯ÙŠØ«Ù‡:**

```json
{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS"
  },
  "deploy": {
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10,
    "startCommand": "npx prisma migrate deploy && npm run start:prod",
    "healthcheckPath": "/api/health",
    "healthcheckTimeout": 300
  }
}
```

**Ø§Ù„Ø¢Ù† Railway Ø³ÙŠØ¹Ø±Ù:**
- âœ… Start Command ØµØ­ÙŠØ­
- âœ… Health Check Endpoint: `/api/health`
- âœ… Restart Policy: ON_FAILURE

---

## âš ï¸ **Ù„ÙƒÙ† Ù‡Ø°Ø§ Ù„Ø§ ÙŠÙƒÙÙŠ!**

### **Railway Settings Ø§Ù„Ø´Ø§Ø´Ø©:**

Ø§Ù„Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙÙŠ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Railway Ù†ÙØ³Ù‡Ø§:

#### **Target Port ÙÙŠ Railway:**

```
Target port
8080    â† âŒ Ø®Ø·Ø£!
```

**ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ†:**
```
Target port
3000    â† âœ… ØµØ­ÙŠØ­!
```

---

## ðŸ”§ **Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©:**

### **Ø§Ù„Ø®Ø·ÙˆØ© 1: ØªØ­Ø¯ÙŠØ« Port ÙÙŠ Railway**

1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰: https://railway.app
2. Ø§ÙØªØ­ **Backend Service**
3. Ø§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ **Settings** â†’ **Networking**
4. Ø§Ø¨Ø­Ø« Ø¹Ù† **Target port**
5. ØºÙŠÙ‘Ø± Ù…Ù† `8080` Ø¥Ù„Ù‰ `3000`
6. Ø§Ø¶ØºØ· **Update**

---

### **Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Environment Variables**

ØªØ£ÙƒØ¯ Ø£Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Railway:

```env
AWS_ACCESS_KEY_ID="QV:xN$78?i:Mxi_B*wr"
AWS_REGION="us-east-1"
AWS_S3_BUCKET="crm-attachments"
AWS_SECRET_ACCESS_KEY="0iBy>[a9@cu0rqv5&0B"
CORS_ORIGIN="https://crm-system-virid.vercel.app"
DATABASE_URL="postgresql://postgres.onyxkfdzbkbuxzwjcnho:A01156573876@aws-1-eu-west-1.pooler.supabase.com:6543/postgres?pgbouncer=true"
JWT_EXPIRES_IN="7d"
JWT_REFRESH_EXPIRES_IN="30d"
JWT_REFRESH_SECRET="i;x#u2V7,]sbE<e8=WG2ea*vAfWKBKa][c"
JWT_SECRET="fb183ee1b50f3dcf3d97baeddda459dcd10cbf30ba14317614d4f4bd8a07e228"
THROTTLE_LIMIT="100"
THROTTLE_TTL="60"
```

âœ… **Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ù…ÙˆØ¬ÙˆØ¯Ø© ÙˆØµØ­ÙŠØ­Ø©**

---

### **Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Vercel Frontend**

ØªØ£ÙƒØ¯ Ø£Ù† `VITE_API_URL` Ù…ÙˆØ¬ÙˆØ¯:

```env
VITE_API_URL=https://web-production-e0446.up.railway.app/api
```

âœ… **Ù…ÙˆØ¬ÙˆØ¯ ÙˆØµØ­ÙŠØ­**

âš ï¸ **Ù„ÙƒÙ† ØªØ£ÙƒØ¯ Ø£Ù†:**
- ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© Build Ù„Ù„Ù…ÙˆÙ‚Ø¹
- Deploy Ø¬Ø¯ÙŠØ¯ ØªÙ…

---

## ðŸ” **Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ´Ø®ÙŠØµ:**

### **1. Ø§Ø®ØªØ¨Ø§Ø± Backend Health Check:**

Ø§ÙØªØ­ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­:
```
https://web-production-e0446.up.railway.app/api/health
```

**Ø§Ù„Ù†ØªØ§Ø¦Ø¬:**

#### âœ… **Ø¥Ø°Ø§ Ø¸Ù‡Ø±:**
```json
{
  "status": "OK",
  "message": "Server is running"
}
```
**Ù‡Ø°Ø§ ÙŠØ¹Ù†ÙŠ:** Backend ÙŠØ¹Ù…Ù„ âœ…

#### âŒ **Ø¥Ø°Ø§ Ø¸Ù‡Ø± 502/503:**
```
502 Bad Gateway
503 Service Unavailable
```
**Ù‡Ø°Ø§ ÙŠØ¹Ù†ÙŠ:** Port mismatch! âŒ

**Ø§Ù„Ø­Ù„:** ØºÙŠÙ‘Ø± Target Port ÙÙŠ Railway Ø¥Ù„Ù‰ `3000`

---

### **2. Ø§Ø®ØªØ¨Ø§Ø± Login Endpoint:**

Ø§ÙØªØ­ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ (Postman/Browser):
```
POST https://web-production-e0446.up.railway.app/api/auth/login
```

**Headers:**
```json
{
  "Content-Type": "application/json"
}
```

**Body:**
```json
{
  "email": "test@example.com",
  "password": "test123"
}
```

**Ø§Ù„Ù†ØªØ§Ø¦Ø¬:**

#### âœ… **Ø¥Ø°Ø§ Ø¸Ù‡Ø± 200 OK:**
```json
{
  "accessToken": "...",
  "refreshToken": "...",
  "user": {...}
}
```
**Ù‡Ø°Ø§ ÙŠØ¹Ù†ÙŠ:** Backend ÙŠØ¹Ù…Ù„ ØªÙ…Ø§Ù…Ø§Ù‹ âœ…

#### âŒ **Ø¥Ø°Ø§ Ø¸Ù‡Ø± 502/503:**
**Ù‡Ø°Ø§ ÙŠØ¹Ù†ÙŠ:** Port mismatch! âŒ

---

### **3. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Console ÙÙŠ Frontend:**

Ø§ÙØªØ­ Ù…ÙˆÙ‚Ø¹Ùƒ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­:

1. Ø§Ø¶ØºØ· **F12**
2. Ø§Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ **Console**
3. Ø§ÙƒØªØ¨:
```javascript
console.log(import.meta.env.VITE_API_URL)
```

**Ø§Ù„Ù†ØªØ§Ø¦Ø¬:**

#### âœ… **Ø¥Ø°Ø§ Ø¸Ù‡Ø±:**
```
https://web-production-e0446.up.railway.app/api
```
**Ù‡Ø°Ø§ ÙŠØ¹Ù†ÙŠ:** Frontend config ØµØ­ÙŠØ­ âœ…

#### âŒ **Ø¥Ø°Ø§ Ø¸Ù‡Ø± `undefined` Ø£Ùˆ `/api`:**
**Ù‡Ø°Ø§ ÙŠØ¹Ù†ÙŠ:** Frontend Ù„Ù… ÙŠØªÙ… Build Ù…Ø¹ Ø§Ù„Ù…ØªØºÙŠØ± âŒ

**Ø§Ù„Ø­Ù„:** Ø£Ø¹Ø¯ Build ÙÙŠ Vercel

---

## ðŸŽ¯ **Ø§Ù„Ø®Ù„Ø§ØµØ©:**

### **Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:**

**Port Mismatch Ø¨ÙŠÙ† Backend Code Ùˆ Railway Settings:**

| Ø§Ù„Ù…ÙƒØ§Ù† | Port | Ø§Ù„Ø­Ø§Ù„Ø© |
|---------|------|---------|
| Backend Code | `3000` | âœ… ØµØ­ÙŠØ­ |
| Railway Settings | `8080` | âŒ Ø®Ø·Ø£! |
| **Ø§Ù„Ù†ØªÙŠØ¬Ø©** | **Backend Ù„Ø§ ÙŠØ¹Ù…Ù„** | âŒ |

---

### **Ø§Ù„Ø­Ù„:**

1. âœ… **ØªØ­Ø¯ÙŠØ« Target Port ÙÙŠ Railway** Ø¥Ù„Ù‰ `3000`
2. âœ… **ØªØ­Ø¯ÙŠØ« `backend/railway.json`** (ØªÙ… Ø¨Ø§Ù„ÙØ¹Ù„)
3. âœ… **Ø§Ù†ØªØ¸Ø± Redeploy ØªÙ„Ù‚Ø§Ø¦ÙŠ**
4. âœ… **Ø§Ø®ØªØ¨Ø± Health Check**
5. âœ… **Ø§Ø®ØªØ¨Ø± Login**

---

## â³ **Ø¨Ø¹Ø¯ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª:**

### **1. Ø§ÙØ­Øµ Railway Logs:**

Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰: **Railway** â†’ **Backend** â†’ **Deployments** â†’ **Latest** â†’ **Logs**

**Ø§Ø¨Ø­Ø« Ø¹Ù†:**
```
ðŸš€ Application is running on: http://localhost:3000
ðŸ“š API Documentation: http://localhost:3000/api/docs
```

âœ… **Ø¥Ø°Ø§ Ø¸Ù‡Ø± Ù‡Ø°Ø§:** Backend ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­

---

### **2. Ø§Ø®ØªØ¨Ø± Health Check:**

```
https://web-production-e0446.up.railway.app/api/health
```

âœ… **ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¹Ø·ÙŠ JSON response**

---

### **3. Ø§Ø®ØªØ¨Ø± Login Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹:**

Ø¬Ø±Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹:

```
https://crm-system-virid.vercel.app/login
```

âœ… **ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¹Ù…Ù„ Ø§Ù„Ø¢Ù†!**

---

## ðŸ“‹ **Checklist Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ:**

- [ ] ØªØ­Ø¯ÙŠØ« Target Port ÙÙŠ Railway Ø¥Ù„Ù‰ `3000`
- [ ] Ø§Ù†ØªØ¸Ø§Ø± Redeploy ØªÙ„Ù‚Ø§Ø¦ÙŠ
- [ ] ÙØ­Øµ Logs ÙÙŠ Railway
- [ ] Ø§Ø®ØªØ¨Ø§Ø± Health Check endpoint
- [ ] Ø§Ø®ØªØ¨Ø§Ø± Login Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹
- [ ] Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Console ÙÙŠ Frontend

---

## ðŸ†˜ **Ø¥Ø°Ø§ Ø§Ø³ØªÙ…Ø±Øª Ø§Ù„Ù…Ø´ÙƒÙ„Ø©:**

### **Send me:**

1. Railway Logs (Ø¢Ø®Ø± 100 Ø³Ø·Ø±)
2. Health Check response
3. Login endpoint response
4. Console output Ù…Ù† Frontend

---

**â³ Ø§Ù„Ø¢Ù†: Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ Railway Settings ÙˆØºÙŠØ± Target Port Ø¥Ù„Ù‰ `3000`!**

